{"version":3,"sources":["webpack:///webpack/bootstrap 71ad43885cd736a446cc","webpack:///./src/angular-modal-service.js"],"names":["module","angular","factory","$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout","ModalService","self","openModals","getTemplate","template","templateUrl","deferred","defer","resolve","then","error","reject","promise","appendChild","parent","child","children","length","enter","closeModals","result","delay","close","splice","showModal","options","body","element","controllerName","controller","modal","modalScope","scope","$new","rootScopeOnClose","$on","cleanUpClose","closeDeferred","closedDeferred","inputs","$scope","preClose","undefined","extend","linkFn","modalElement","$element","controllerObjBefore","controllerAs","modalController","appendElement","bodyClass","classList","add","closed","document","activeElement","blur","push","remove","leave","$destroy","i"],"mappings":"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","file":"angular-modal-service.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 71ad43885cd736a446cc","'use strict';\r\n\r\nvar module = angular.module('angularModalService', []);\r\n\r\nmodule.factory('ModalService', ['$animate', '$document', '$compile', '$controller', '$http', '$rootScope', '$q', '$templateRequest', '$timeout',\r\n  function($animate, $document, $compile, $controller, $http, $rootScope, $q, $templateRequest, $timeout) {\r\n\r\n  function ModalService() {\r\n\r\n    var self = this;\r\n    \r\n    //  Track open modals.\r\n    self.openModals = [];\r\n\r\n    //  Returns a promise which gets the template, either\r\n    //  from the template parameter or via a request to the\r\n    //  template url parameter.\r\n    var getTemplate = function(template, templateUrl) {\r\n      var deferred = $q.defer();\r\n      if (template) {\r\n        deferred.resolve(template);\r\n      } else if (templateUrl) {\r\n        $templateRequest(templateUrl, true)\r\n          .then(function(template) {\r\n            deferred.resolve(template);\r\n          }, function(error) {\r\n            deferred.reject(error);\r\n          });\r\n      } else {\r\n        deferred.reject(\"No template or templateUrl has been specified.\");\r\n      }\r\n      return deferred.promise;\r\n    };\r\n\r\n    //  Adds an element to the DOM as the last child of its container\r\n    //  like append, but uses $animate to handle animations. Returns a\r\n    //  promise that is resolved once all animation is complete.\r\n    var appendChild = function(parent, child) {\r\n      var children = parent.children();\r\n      if (children.length > 0) {\r\n        return $animate.enter(child, parent, children[children.length - 1]);\r\n      }\r\n      return $animate.enter(child, parent);\r\n    };\r\n\r\n    //  Close all modals, providing the given result to the close promise.\r\n    self.closeModals = function(result, delay) {\r\n      while (self.openModals.length) {\r\n        self.openModals[0].close(result, delay);\r\n        self.openModals.splice(0, 1);\r\n      }\r\n    };\r\n\r\n    self.showModal = function(options) {\r\n\r\n      //  Get the body of the document, we'll add the modal to this.\r\n      var body = angular.element($document[0].body);\r\n\r\n      //  Create a deferred we'll resolve when the modal is ready.\r\n      var deferred = $q.defer();\r\n\r\n      //  Validate the input parameters.\r\n      var controllerName = options.controller;\r\n      if (!controllerName) {\r\n        deferred.reject(\"No controller has been specified.\");\r\n        return deferred.promise;\r\n      }\r\n\r\n      //  Get the actual html of the template.\r\n      getTemplate(options.template, options.templateUrl)\r\n        .then(function(template) {\r\n\r\n          //  The main modal object we will build.\r\n          var modal = {};\r\n\r\n          //  Create a new scope for the modal.\r\n          var modalScope = (options.scope || $rootScope).$new();\r\n          var rootScopeOnClose = $rootScope.$on('$locationChangeSuccess', cleanUpClose);\r\n\r\n          //  Create the inputs object to the controller - this will include\r\n          //  the scope, as well as all inputs provided.\r\n          //  We will also create a deferred that is resolved with a provided\r\n          //  close function. The controller can then call 'close(result)'.\r\n          //  The controller can also provide a delay for closing - this is\r\n          //  helpful if there are closing animations which must finish first.\r\n          var closeDeferred = $q.defer();\r\n          var closedDeferred = $q.defer();\r\n          var inputs = {\r\n            $scope: modalScope,\r\n            close: function(result, delay) {\r\n              //  If we have a pre-close function, call it.\r\n              if (typeof options.preClose === 'function') options.preClose(modal, result, delay);\r\n\r\n              if (delay === undefined || delay === null) delay = 0;\r\n              $timeout(function() {\r\n\r\n                cleanUpClose(result);\r\n\r\n              }, delay);\r\n            }\r\n          };\r\n\r\n          //  If we have provided any inputs, pass them to the controller.\r\n          if (options.inputs) angular.extend(inputs, options.inputs);\r\n\r\n          //  Compile then link the template element, building the actual element.\r\n          //  Set the $element on the inputs so that it can be injected if required.\r\n          var linkFn = $compile(template);\r\n          var modalElement = linkFn(modalScope);\r\n          inputs.$element = modalElement;\r\n\r\n          //  Create the controller, explicitly specifying the scope to use.\r\n          var controllerObjBefore = modalScope[options.controllerAs];\r\n          var modalController = $controller(options.controller, inputs, false, options.controllerAs);\r\n\r\n          if (options.controllerAs && controllerObjBefore) {\r\n            angular.extend(modalController, controllerObjBefore);\r\n          }\r\n\r\n          //  Then, append the modal to the dom.\r\n          if (options.appendElement) {\r\n            // append to custom append element\r\n            appendChild(options.appendElement, modalElement);\r\n          } else {\r\n            // append to body when no custom append element is specified\r\n            appendChild(body, modalElement);\r\n          }\r\n\t\t  \r\n          // Finally, append any custom classes to the body\r\n          if(options.bodyClass) {\r\n            body[0].classList.add(options.bodyClass);\r\n          }\r\n\r\n          //  Populate the modal object...\r\n          modal.controller = modalController;\r\n          modal.scope = modalScope;\r\n          modal.element = modalElement;\r\n          modal.close = closeDeferred.promise;\r\n          modal.closed = closedDeferred.promise;\r\n\r\n          //  ...which is passed to the caller via the promise.\r\n          deferred.resolve(modal);\r\n\r\n          // Clear previous input focus to avoid open multiple modals on enter\r\n          document.activeElement.blur();\r\n\r\n          //  We can track this modal in our open modals.\r\n          self.openModals.push({ modal: modal, close: inputs.close });\r\n\r\n          function cleanUpClose(result) {\r\n\r\n            //  Resolve the 'close' promise.\r\n            closeDeferred.resolve(result);\r\n\t\t\t\r\n            //  Remove the custom class from the body\r\n            if(options.bodyClass) {\r\n                body[0].classList.remove(options.bodyClass);\r\n            }\r\n\r\n            //  Let angular remove the element and wait for animations to finish.\r\n            $animate.leave(modalElement)\r\n                    .then(function () {\r\n                      //  Resolve the 'closed' promise.\r\n                      closedDeferred.resolve(result);\r\n\r\n                      //  We can now clean up the scope\r\n                      modalScope.$destroy();\r\n\r\n                      //  Remove the modal from the set of open modals.\r\n                      for (var i=0; i<self.openModals.length; i++) {\r\n                        if (self.openModals[i].modal === modal) {\r\n                          self.openModals.splice(i, 1);\r\n                          break;\r\n                        }\r\n                      }\r\n\r\n                      //  Unless we null out all of these objects we seem to suffer\r\n                      //  from memory leaks, if anyone can explain why then I'd\r\n                      //  be very interested to know.\r\n                      inputs.close = null;\r\n                      deferred = null;\r\n                      closeDeferred = null;\r\n                      modal = null;\r\n                      inputs = null;\r\n                      modalElement = null;\r\n                      modalScope = null;\r\n                    });\r\n\r\n            // remove event watcher\r\n            rootScopeOnClose && rootScopeOnClose();\r\n          }\r\n\r\n        })\r\n        .then(null, function(error) { // 'catch' doesn't work in IE8.\r\n          deferred.reject(error);\r\n        });\r\n\r\n      return deferred.promise;\r\n    };\r\n\r\n  }\r\n\r\n  return new ModalService();\r\n}]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/angular-modal-service.js"],"sourceRoot":""}